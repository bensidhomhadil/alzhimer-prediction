<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Profil</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            background: #f8f9fa;
        }

        /* Background container styling */
        .background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('{{ url_for('static', filename='brain.jpg') }}') no-repeat center center/cover;
            background-size: cover;
            background-position: center;
            opacity: 0.4;
            z-index: -1;
        }

        /* Form container */
        .container {
            position: relative;
            z-index: 1;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px; /* Bordures arrondies sur le conteneur principal */
            padding: 40px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            max-width: 900px;
            width: 100%;
            overflow-y: auto;
            margin-top: 5%;
            margin-right: 20%;
        }

        /* Section Titles */
        .section-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            font-weight: bold;
            color: #343a40;
        }

        /* Form elements styling */
        .form-group {
            margin-bottom: 20px;
        }

        /* Adding border-radius to form fields and buttons */
        .form-control, select {
            border-radius: 20px;  /* Bordures arrondies pour les champs */
            padding: 10px;  /* Padding supplémentaire pour le confort */
        }

        /* Styling the submit button */
        button {
            width: 100%;
            padding: 15px;
            background-color: #183c57;
            color: white;
            border: none;
            border-radius: 20px;  /* Bordures arrondies pour le bouton */
            font-size: 1rem;
        }

        button:hover {
            background-color: #204d77;
        }

        /* Styling for Flash Messages */
        .alert {
            margin-top: 20px;
        }

        /* Custom Styling to display all categories vertically */
        .section {
            margin-bottom: 30px;
        }

    </style>
</head>
<body>
    <!-- Background Container -->
    <nav class="navbar navbar-expand-lg navbar-light bg-body-tertiary">
        <div class="container-md d-flex justify-content-between align-items-center">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" style="height: 50px;">
            <a class="navbar-brand" style="margin-left: 400%;" href="{{ url_for('logout') }}">Se déconnecter</a>
        </div>
    </nav>
    <div class="container">
        <!-- Form for Alzheimer's Prediction -->
        <form method="POST" action="{{ url_for('profile') }}">
            <div class="form-group">
                <label for="age">Âge:</label>
                <input type="number" class="form-control" id="age" name="age" required>
            </div>
            <div class="form-group">
                <label for="gender">Sexe:</label>
                <select class="form-control" id="gender" name="gender" required>
                    <option value="Male">Homme</option>
                    <option value="Female">Femme</option>
                </select>
            </div>
            <div class="form-group">
                <label for="adl">Activités de la vie quotidienne :</label>
                <input type="range" class="form-control-range" id="adl" name="adl" min="0" max="10" step="0.1" value="5" oninput="adlOutput.value = this.value" required>
                <output id="adlOutput" style="margin-left: 10px;">5</output>
            </div>
                      
            <div class="form-group">
                <label for="education_level">Niveau d'éducation:</label>
                <select class="form-control" id="education_level" name="education_level" required>
                    <option value="" disabled selected>Choisir un niveau</option>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="bmi">BMI:</label>
                <input type="range" class="form-control-range" id="bmi" name="bmi" min="15" max="40" step="0.1" oninput="bmiOutput.value = this.value" required>
                <output id="bmiOutput" style="margin-left: 10px;">27.5</output>
            </div>
            
            <div class="form-group">
                <label for="smoking">Tabagisme:</label>
                <select class="form-control" id="smoking" name="smoking" required>
                    <option value="Yes">Oui</option>
                    <option value="No">Non</option>
                </select>
            </div>
            <div class="form-group">
                <label for="alcohol_consumption">Consommation d'alcool :</label>
                <input type="range" class="form-control-range" id="alcohol_consumption" name="alcohol_consumption" min="0" max="20" step="0.1" value="10" oninput="alcoholOutput.value = this.value" required>
                <output id="alcoholOutput" style="margin-left: 10px;">10</output>
            </div>
            
            <div class="form-group">
                <label for="sleep_quality">Qualité du sommeil:</label>
                <input type="range" class="form-control-range" id="sleep_quality" name="sleep_quality" min="0" max="10" step="0.1" oninput="sleepQualityOutput.value = this.value" required>
                <output id="sleepQualityOutput" style="margin-left: 10px;">5</output>
            </div>
            
            <div class="form-group">
                <label for="family_history_of_alzheimers">Antécédents familiaux de la maladie d'Alzheimer :</label>
                <select class="form-control" id="family_history_of_alzheimers" name="family_history_of_alzheimers" required>
                    <option value="Oui">Oui</option>
                    <option value="Non">Non</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="cardiovascular_disease">Maladies cardiovasculaires:</label>
                <select class="form-control" id="cardiovascular_disease" name="cardiovascular_disease" required>
                    <option value="Yes">Oui</option>
                    <option value="No">Non</option>
                </select>
            </div>
            <div class="form-group">
                <label for="diabetes">Diabète:</label>
                <select class="form-control" id="diabetes" name="diabetes" required>
                    <option value="Yes">Oui</option>
                    <option value="No">Non</option>
                </select>
            </div>
            <div class="form-group">
                <label for="depression">Dépression:</label>
                <select class="form-control" id="depression" name="depression" required>
                    <option value="Yes">Oui</option>
                    <option value="No">Non</option>
                </select>
            </div>
            <div class="form-group">
                <label for="hypertension">Hypertension:</label>
                <select class="form-control" id="hypertension" name="hypertension" required>
                    <option value="Yes">Oui</option>
                    <option value="No">Non</option>
                </select>
            </div>
            <div class="form-group">
                <label for="cholesterol_total">Cholestérol total (mg/dL) :</label>
                <input type="number" class="form-control" id="cholesterol_total" name="cholesterol_total" min="150" max="300" step="1" required>
            </div>
            
            <div class="form-group">
                <label for="mmse">MMSE:</label>
                <input type="range" class="form-control-range" id="mmse" name="mmse" min="0" max="30" step="0.1" oninput="mmseOutput.value = this.value" required>
                <output id="mmseOutput" style="margin-left: 10px;">15</output>
            </div>
            
            <div class="form-group">
                <label for="functional_assessment">Évaluation fonctionnelle:</label>
                <input type="range" class="form-control-range" id="functional_assessment" name="functional_assessment" min="0" max="10" step="0.1" oninput="functionalAssessmentOutput.value = this.value" required>
                <output id="functionalAssessmentOutput" style="margin-left: 10px;">5</output>
            </div>
            
            <div class="form-group">
                <label for="memory_complaints">Plaintes de mémoire:</label>
                <select class="form-control" id="memory_complaints" name="memory_complaints" required>
                    <option value="Yes">Oui</option>
                    <option value="No">Non</option>
                </select>
            </div>
            <div class="form-group">
                <label for="behavioral_problems">Problèmes comportementaux:</label>
                <select class="form-control" id="behavioral_problems" name="behavioral_problems" required>
                    <option value="Yes">Oui</option>
                    <option value="No">Non</option>
                </select>
            </div>

            <div class="form-group">
                <label for="confusion">Confusion:</label>
                <select class="form-control" id="confusion" name="confusion" required>
                    <option value="Yes">Oui</option>
                    <option value="No">Non</option>
                </select>
            </div>
            <div class="form-group">
                <label for="disorientation">Désorientation:</label>
                <select class="form-control" id="disorientation" name="disorientation" required>
                    <option value="Yes">Oui</option>
                    <option value="No">Non</option>
                </select>
            </div>
            <div class="form-group">
                <label for="personality_changes">Changements de personnalité:</label>
                <select class="form-control" id="personality_changes" name="personality_changes" required>
                    <option value="Yes">Oui</option>
                    <option value="No">Non</option>
                </select>
            </div>
            <div class="form-group">
                <label for="difficulty_completing_tasks">Difficulté à accomplir les tâches:</label>
                <select class="form-control" id="difficulty_completing_tasks" name="difficulty_completing_tasks" required>
                    <option value="Yes">Oui</option>
                    <option value="No">Non</option>
                </select>
            </div>
            <div class="form-group">
                <label for="forgetfulness">Oubli:</label>
                <select class="form-control" id="forgetfulness" name="forgetfulness" required>
                    <option value="Yes">Oui</option>
                    <option value="No">Non</option>
                </select>
            </div>
            <button type="submit" class="btn btn-outline-dark">Soumettre</button>
        </form>
        {% if prediction is not none %}
        {% if prediction == 0 %}
            <div id="prediction-alert" class="alert alert-success alert-dismissible fade show position-fixed" style="top: 20px; right: 20px; z-index: 1050;" role="alert">
                Le sujet est probablememnt<strong>  sain</strong> 
            </div>
        {% elif prediction == 1 %}
            <div id="prediction-alert" class="alert alert-danger alert-dismissible fade show position-fixed" style="top: 20px; right: 20px; z-index: 1050;" role="alert">
                Le sujet est probablement<strong> malade, </strong>il faut consulter un médecin.
            </div>
        {% endif %}
    {% endif %}
    

    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Attendre que la page soit entièrement chargée
        document.addEventListener("DOMContentLoaded", function () {
            // Trouver l'élément de l'alerte
            const alertElement = document.getElementById("prediction-alert");
            if (alertElement) {
                // Faire disparaître l'alerte après 10 secondes (10 000 ms)
                setTimeout(() => {
                    const alertInstance = bootstrap.Alert.getOrCreateInstance(alertElement);
                    alertInstance.close(); // Utiliser l'API Bootstrap pour fermer l'alerte
                }, 10000);
            }
        });
    </script>
</body>
</html>